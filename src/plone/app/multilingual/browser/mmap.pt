<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/prefs_main_template/macros/master"
    i18n:domain="plone.app.multilingual">

<body>

<div metal:fill-slot="prefs_configlet_content">

<script type="text/javascript">
(function($) {

    $().ready(function() {
        $('.formControls input').click(function (event) {
          event.preventDefault();
          $.get('@@migration-view', function(data) {
            $('.results').html(data)
          });
        });
    });

})(jQuery);
</script>

  <div id="region-content" class="documentEditable">

    <div id="edit-bar" i18n:domain="plone.app.multilingual">
        <ul class="contentViews" id="content-views">
          <li>
            <a href=""
               tal:attributes="href string:${portal_url}/@@language-controlpanel"
               i18n:translate="label_general">General</a>
          </li>
          <li class="selected">
            <a href=""
               tal:attributes="href string:${portal_url}/@@multilingual-map"
               i18n:translate="label_translation_map">Translation Map</a>
          </li>
          <li>
            <a href=""
               tal:attributes="href string:${portal_url}/@@multilingual-backup"
               i18n:translate="label_backup">Backup</a>
          </li>
          <li tal:condition="view/isLPinstalled">
            <a href=""
               tal:attributes="href string:${portal_url}/@@lp-migration"
               i18n:translate="label_migration">Migration</a>
          </li>
        </ul>
    </div>

    <div class="contentActions">
      &#160;
    </div>

    <div class="documentContent" id="content">
      <a name="documentContent"></a>

        <div metal:use-macro="context/global_statusmessage/macros/portal_message">
        Portal status message
        </div>

        <div class="configlet">

            <h1 class="documentFirstHeading"
                i18n:translate="heading_translation_map">Products.LinguaPlone Translation Map</h1>

            <a href=""
                class="link-parent"
                tal:attributes="href string:${portal_url}/plone_control_panel"
                i18n:translate="label_up_to_plone_setup">
                    Up to Site Setup
            </a>

            <p i18n:translate="description_translation_map">
                Translation map.
            </p>

            <div tal:define="not_full_translated view/canonicals">
              <ul>
              <tal:block repeat="canonical not_full_translated">
                <li>
                <span tal:content="canonical/id">Id</span>
                <ul tal:define="last_url canonical/last_url">
                  <li>
                    <span i18n:translate="missing_languages">Missing languages: </span>
                    <tal:block2 repeat="missing canonical/missing">
                      <a href="" tal:attributes="href string:$last_url/@@create_translation?form.widgets.language=$missing&form.buttons.create=1" tal:content="missing">
                        lang
                      </a>
                    </tal:block2>
                  </li>
                  <li>
                    <span i18n:translate="translation">Translations: </span>
                    <tal:block2 repeat="missing canonical/translated">
                      <a href="" tal:attributes="href missing/url">
                        <span tal:content="missing/path">Path</span>
                        <span tal:content="missing/lang">Lang</span>
                      </a>
                    </tal:block2>
                  </li>
                </ul>
                </li>
              </tal:block>
              </ul>
            </div>

        </div>
      </div>
    </div>
</div>

</body>
</html>
